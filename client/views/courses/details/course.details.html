<template name="coursedetails">

  <div id="coursedetails">

	{{#with course}}
		{{#if isEditing}}
			{{>course_edit}}
		{{else}}
			<div class="course_main">
			<h2 class="name">{{name}}</h2>
			<p class="small"> Time created: {{dateformat time_created}}, Last edited: {{dateformat time_lastedit}} Created by: {{username createdby}}, {{> show_categories}}</p>
			<p class="descr">{{description}}</p>

			<input type="button" class="edit" value="Edit" />
			<input type="button" class="del" value="Delete" />
			</div>
		{{/if}}

		<div class="participants">
			<h3>Participants</h3>
			{{#each roleDetails roles}}
				{{> roleDetails}}
			{{/each}}
		</div>
    {{/with}}
    
	<ul class='subscribers'>
	{{#each subscribers}}
		<li>
			{{name}} 
			<ul class='roles'>
				{{#each roles}}<li class='{{this}}'>{{this}}</li>{{/each}}
			</ul>
		</li>
	{{/each}}
	</ul>
	
	{{#with course}}
		{{> votelists}}
		{{> postDialog}}
		{{> discussion}}
	{{/with}}
  </div>
</template>

<template name="roleDetails">
	<div class="roleDetails role_{{roletype.type}}">
		<div class="subscribe">
		{{#if subscribed}}
			<span class='subscribed'>you are subscribed <input type="button" class="unsubscribe" name="{{roletype.type}}" value="retract" /></span>
		{{else}}
			<input type="button" class="subscribe" name="participant" value="{{roletype.subscribe}}" />
		{{/if}}
		</div>
	</div>
</template>

