<template name="membersRoles">
	<div class="participants">
		<ul class='subscribers list-unstyled'>
		{{#each members}}
			{{> memberRoles member=this course=..}}
		{{/each}}
		</ul>
	</div>
</template>

<template name="memberRoles">
	<li>
		{{>profilelink member.user}}
		<ul class='roles list-unstyled'>
			{{#each member.roles}}
				<li class='{{this}}'> {{this}} </li>
			{{/each}}
		</ul>
		<span class="member_comment">
			{{#if editableMessage}}
				{{> editable editableMessage}}
			{{else}}
				{{member.comment}}
			{{/if}}
		</span>
	</li>
</template>

<template name="roleDetails">
	{{#each this}}
		{{> roleDetail}}
	{{/each}}
</template>

<template name="roleDetail">
	<div class="roleDetails role_{{roletype.type}}">
		<div class="subscribe">
		{{#if subscribed}}
			<span class='subscribed'>{{mf 'course.roles.you_are' 'you are'}} {{#if anonsub}}{{mf 'course.roles.anonymously' 'anonymously'}} {{/if}}{{mf 'course.roles.subscribed_as' 'subscribed as'}} {{roletype.type}} <input type="button" class="unsubscribe" name="{{roletype.type}}" value="retract"/></span>
		{{else}}
			{{#if enrolling}}
				<div class="enrol_as_title col-sm-12">
					<div class="container-fluid">
						<h3>{{mf 'course.roles.enrol_as' 'enrol as'}} {{role}}</h3>
					</div>
				</div>
				<div class="enrol_as_options col-sm-12">
					<span class="glyphicon glyphicon-send"></span>
					{{mf 'course.roles.leave_message' 'leave a message/wish/interest here:'}}
					<textarea cols="50" rows="3" class='enrol_as_comment form-control'>{{../../member.comment}}</textarea>

					{{#if privacyEnabled}}
					<div class="checkbox">
						<label><input type="checkbox" class="incognito" value="1" /> {{mf 'course.roles.incognitosubscription' 'incognito'}} â˜”</label>
					</div>
					{{/if}}

					<div class="enrol_as_buttons col-sm-12 no-padding">
						<div class="col-sm-6">
							<button class="subscribe form-control btn btn-default">
								<span class="glyphicon glyphicon-ok"></span>
								{{mf 'course.roles.enrol' 'enrol'}}
							</button>
						</div>
						<div class="col-sm-6">
						<button class="cancel form-control btn btn-default">
							<span class="glyphicon glyphicon-remove"></span>
							{{mf 'course.roles.cancelenrol'  'Cancel'}}
						</button>
						</div>
					</div>
				</div>
			{{else}}
					<button type="button" class="enrol form-control btn btn-primary no-padding" name="participant">
						<div class="container-fluid">
							{{roletype.subscribe}}
							
						</div>
					</button>
			{{/if}}
		{{/if}}
		</div>
	</div>
</template>
