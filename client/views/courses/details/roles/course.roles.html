<template name="courseRoles">
	<div class="course-roles">
		{{#each this}}
			{{> courseRole}}
		{{/each}}
	</div>
</template>

<template name="courseRole">
	<div class="course-role{{#if enrolling}}-enrol{{/if}}">
		{{#if subscribed}}
			<div class="course-role-title">
				<span class="{{roletype.icon}}"></span>&nbsp;
				<span>{{#with roletype}}{{mf roleSubscribed}}{{/with}}</span>
				<button class="js-role-unsubscribe-btn"
					name="{{roletype.type}}"
					role="button"
					type="button">
					{{mf 'course.roles.retract' 'Retract'}}
				</button>
			</div>
		{{else}}
			{{#if enrolling}}
				<div class="course-role-title-enrol">
					<span class="{{roletype.icon}}"></span>&nbsp;
					<span>{{mf 'course.roles.enrol_as' 'Enroll as'}} {{role}}</span>
				</div>
				<div class="course-role-enrol-options">
					{{mf 'course.roles.leave_message' 'Leave a message/wish/interest here:'}}
					<textarea class='course-role-enrol-comment'>{{../../member.comment}}</textarea>
					{{#if privacyEnabled}}
						<div class="checkbox">
							<label>
								<input class="incognito" type="checkbox" value="1" />
								{{mf 'course.roles.incognitosubscription' 'incognito'}} â˜”
							</label>
						</div>
					{{/if}}
					<div class="course-role-enrol-btns">
						<button class="js-role-subscribe-btn">
							<span class="glyphicon glyphicon-ok"></span>
							{{mf 'course.roles.enrol' 'Enroll'}}
						</button>
						<button class="js-role-enrol-cancel-btn">
							<span class="glyphicon glyphicon-remove"></span>
							{{mf 'course.roles.cancelenrol'  'Cancel'}}
						</button>
					</div>
				</div>
			{{else}}
				{{#if maySubscribe roletype.type}}
					<button class="js-role-enrol-btn" type="button" name="participant">
						<span class="{{roletype.icon}}"></span>&nbsp;
						{{#with roletype}}{{mf roleSubscribe}}{{/with}}
					</button>
				{{/if}}
			{{/if}}
		{{/if}}
	</div>
</template>
