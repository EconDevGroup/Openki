<template name="course_edit">
	<div class="course-edit">
		<form>
			{{#if _id}}
				<h2>{{mf 'course.edit.edit_course' 'Edit course'}}</h2>
			{{else}}
				<h2>{{mf 'course.edit.propose' 'Propose new course'}}</h2>
				<span class="fa fa-info"></span>
				&nbsp;
				{{mf 'course.propose.EventInfo' 'In case you want to publish a singular event, use the following form instead:'}}
				<a href="/event/create">{{mf 'menue.CreateEvent'}}</a>
			{{/if}}
			<div class="course-edit-body">
				<div class="form-group">
					<label>{{mf 'course.edit.title' 'Title:'}}</label>
					<input class="form-control input-lg"
						id="editform_name"
						placeholder="{{mf 'course.title.placeholder' 'What are you interested in?'}}"
						size="40"
						type="text"
						value="{{name}}"/>
				</div>
				<div class="form-group">
					<label>{{mf 'course.edit.description' 'Description:'}}</label>
					<div class="input-group">
						<span class="input-group-addon">
							<span class="glyphicon glyphicon-info-sign"></span>
						</span>
						<div class="form-control editable-textarea"
							id="editform_description"
							data-placeholder="{{mf 'course.description.placeholder' ' Describe your idea, so that more people will find it and that they`ll know what to expect.'}}">
							{{{description}}}
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="form-group-element">
						{{#if editingCategories}}
							<label>{{mf 'course.edit.edit_categories' 'Edit Categories:'}}</label>
							{{#each availableCategories}}
								<div class="checkbox">
									<label class="{{isChecked}}">
										<input class='js-category-checkbox cat_{{this}}'
											name='{{this}}'
											type='checkbox'
											value="1"
											{{checkCategory}}/>
										{{> categoryLabel}}
										<i class="fa fa-angle-down fa-fw {{isChecked}}"></i>
									</label>
								</div>
								{{#each availableSubcategories this}}
									<div class="checkbox checkbox-sub">
										<label class="{{isChecked}}">
											<input class='js-category-checkbox cat_{{this}}'
												name='{{this}}'
												type='checkbox'
												value="1"
												{{checkCategory}}/>
											{{> categoryLabel}}
										</label>
									</div>
								{{/each}}
							{{/each}}
						{{else}}
							<h4>{{mf 'course.edit.categories' 'Categories:'}}</h4>
							{{#if categories}}
								{{>courseCategories}}
							{{/if}}
							{{#unless categories}}
								{{mf 'course.edit.no.categories' 'No categories'}}
							{{/unless}}
							<button type="button" class="btn btn-edit editCategories">
								<span class="glyphicon glyphicon-edit"></span>
								{{mf 'course.edit.edit_categories-button' 'Edit categories'}}
							</button>
						{{/if}}
					</div>
					<div class="form-group-element">
						<label>{{mf 'course.edit.needs.role' 'This course might need...'}}</label>
						{{#each available_roles}}
							{{> courseEditRole selected=../roles role=this members=../members}}
						{{/each}}
					</div>
					{{#unless _id}}
						<div class="form-group-element">
							<label>{{mf 'course.edit.region' 'Region:'}}</label>
							<select class="region_select form-control" name='region'>
								<option value='' disabled selected class="select_placeholder">
									{{mf 'course.edit.pls_select_region' 'Please select a region'}}
								</option>
								{{#each regions}}
									<option value='{{_id}}' selected="{{#if currentRegion this}}selected{{/if}}">
										{{name}}
									</option>
								{{/each}}
							</select>
						</div>
					{{/unless}}
				</div>

				<div class="form-group">
					<label>{{mf 'course.edit.intern' 'Internal course:'}}</label>
					<div class="checkbox">
						<label>
							<input class="-courseInternal"
								type="checkbox"
								{{isInternal}}/>
							{{mf 'course.edit.internDescription' 'Show this course only in a group or location'}}
						</label>
					</div>
				</div>

				<div class="form-actions">
					<button type="button" class="btn btn-cancel js-course-edit-cancel">
						{{mf '_button.cancel'}}
					</button>
					<button type="button" class="btn btn-save js-course-edit-save">
						<i class="fa fa-download fa-fw" aria-hidden="true"></i>
						{{mf 'course.edit.save_btn' 'Save'}}
					</button>
				</div>
			</div>
		</form>
	</div>
</template>

<template name="courseEditRole">
	<div class="checkbox">
		<label class="{{role.type}}">
			<input class='-roleselection {{role.type}}'
				name='{{role.type}}'
				type="checkbox"
				{{checkRole}}/>
			<i class="{{role.icon}} fa-fw"></i>
			{{mf roleDescription}}
		</label>
	</div>
	{{#if checkRole}}
		<div class="checkbox checkbox-sub">
			<label>
				<input class='-enrol {{role.type}}'
					name='{{role.type}}'
					type="checkbox"
					{{hasRole}}/>
				{{mf roleSubscription}}
			</label>
		</div>
	{{/if}}
</template>
