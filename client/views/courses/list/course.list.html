<template name="coursepage">
	<div class="container-fluid">
		<h1>{{mf 'course.list.title' 'CourseList'}}</h1>
		<div class="row container-fluid">
			<h1>{{mf 'courses.missingorg' 'Courses missing organizer(-team)'}}</h1>
			{{> courselist missing_organizer}}
		</div><!-- /.row -->
		<div class="row container-fluid">
			<h1>{{mf 'courses.missingsubs' 'Courses that are still looking for participants'}}</h1>
			{{> courselist missing_subscribers}}
		</div><!-- /.row -->
		<div class="row container-fluid">
			<h1>{{mf 'courses.all' 'All courses'}}</h1>
			{{> courselist all_courses}}
		</div><!-- /.row -->
	</div><!-- /.container-fluid -->
</template>


<template name="courselist">
	{{#each this}}
		{{> course}}
	{{else}}
		{{mf 'courses.none' 'no courses found'}}
	{{/each}}
</template>

<template name="course">
	{{#if ready}}
		<div class="courselist_course_container">
			<a href="{{pathFor 'showCourse'}}">
				<div class="courselist_course
										{{coursestate}}
										{{#if hasupcomingevents}}hasupcomingevents{{/if}}
										{{#if needsHost}}needsHost{{/if}}
										{{#if needsMentor}}needsMentor{{/if}}
										{{#each categories}}{{this}} {{/each}}
										{{#each this.groups}}{{this}} {{/each}}
										{{courseRegion}}">
					<div class="course_content {{coursestate}}">
						<div class="course-name">
							<h4>{{name}}</h4>
						</div><!-- /.course-name -->
						<div class="course_categories">
							{{> show_categories}}
						</div><!-- /.course_categories -->
					</div><!-- /.course_content -->
					{{#if hasupcomingevents}}
						<div class="course_eventlist">
							{{#each course_eventlist}}
								<div class="course_eventlist_date">
									<span class="fa fa-calendar" aria-hidden="true"></span>
									{{dateformat_mini this.start}}
								</div><!-- course_eventlist_date -->
								<div class="course_eventlist_time">
									<span class="glyphicon glyphicon-time" aria-hidden="true"></span>
									{{timeformat this.start}}
								</div><!-- /.course_evntlist_time -->
								<!-- Start 'location.name' helper statement -->
								{{#if location.name}}
									<div class="course_eventlist_location ellipsis">
										<span class="glyphicon glyphicon-home" aria-hidden="true"></span>
										<span>{{location.name}}</span>
									</div>
								{{/if}} <!-- /location.name -->
							{{/each}}
							{{#if course_eventlist_hasmore}}
								<div class="course_eventlist_hasmore">
									+ {{course_eventlist_hasmore}}
									&nbsp;
									<span class="glyphicon glyphicon-calendar"></span>
								</div><!-- /.course_eventlist_hasmore -->
							{{/if}}
						</div><!-- /.course_eventlist -->
					{{else}}
						{{> courseStatus}}
					{{/if}}
					<div class="course_groups">
						{{> groupList}}
					</div><!-- /.course_groups -->
				</div><!-- /.courselist_course -->
			</a>
		</div><!-- /.courselist_course_container -->
	{{/if}}
</template>

<template name="courseStatus">
	<div class="course_status">
		<div class="team_status {{#if needsTeam}}no{{else}}yes{{#if is_team}}you{{/if}}{{/if}}"
			data-toggle="tooltip"
			data-placement="right"
			data-original-title="{{#if needsTeam}}{{mf 'course.list.status_titles.needs_organizer' 'Needs an organizer'}}{{else}}{{#if is_team}}{{mf 'course.list.status_titles.u_are_organizer' 'You are organizer'}}{{else}}{{mf 'course.list.status_titles.has_team' 'Has a organizer-team'}}{{/if}}{{/if}}"
			href="#">
			<span class="glyphicon glyphicon-bullhorn"></span>
		</div><!-- /.course_status -->
		{{#if requiresMentor}}
			<div class="mentor_status {{#if needsMentor}}no{{else}}yes{{#if is_mentor}}you{{/if}}{{/if}}"
				data-toggle="tooltip"
				data-placement="right"
				data-original-title="{{#if needsMentor}}{{mf 'course.list.status_titles.needs_mentor' 'Needs a mentor'}}{{else}}{{#if is_mentor}}{{mf 'course.list.status_titles.u_are_mentor' 'You are mentor'}}{{else}}{{mf 'course.list.status_titles.has_mentor' 'Has a mentor'}}{{/if}}{{/if}}"
				href="#">
				<span class="fa fa-graduation-cap"></span>
			</div><!-- /.mentor_status -->
		{{/if}}
		{{#if requiresHost}}
			<div class="host_status {{#if needsHost}}no{{else}}yes{{#if is_host}}you{{/if}}{{/if}}"
				data-toggle="tooltip"
				data-placement="right"
				data-original-title="{{#if needsHost}}{{mf 'course.list.status_titles.needs_host' 'Needs a host'}}{{else}}{{#if is_host}}{{mf 'course.list.status_titles.u_are_host' 'You are host'}}{{else}}{{mf 'course.list.status_titles.has_host' 'Has a host'}}{{/if}}{{/if}}"
				href="#">
				<span class="glyphicon glyphicon-home"></span>
			</div><!-- /.host_status -->
		{{/if}}
	</div><!-- /.course_status -->
</template>
