<template name="calendar">
	<div class="calendar">
		{{> switchDate date=startDate}}
		{{#each days}}
			{{> calendarDay day=this filter=filter}}
			<hr>
		{{/each}}
		{{> switchDate date=startDate}}
	</div>
</template>

<template name="calendarDay">
	<div class="calendar_date">
		<div class="date">
			{{calendarDay day.start}}
		</div>
		{{#if eventsReady}}
			{{#unless hasEvents}}
				<br>
				{{mf 'calendar.noCoursesThisDay' "There are no courses on this day"}}
			{{/unless}}
			{{#if hasEvents}}
				<div class="calendar_events">
					{{#each events}}
						{{#if past}}
							{{> calendar_event_past}}
						{{else}}
							{{> calendar_event}}
						{{/if}}
					{{/each}}
				</div>
			{{/if}}
		{{else}}
			{{> loadingRow}}
		{{/if}}
	</div>
</template>

<template name="calendar_event">
	<a href="{{pathFor 'showEvent'}}">
		<div class="event_small_container">
			<div class="event_small">
				<div class="-eventLocationTime">
					<span class="fa fa-clock-o"></span>
					<span class="event_time">{{timeformat start}} - {{timeformat end}}</span>
					<br>
					<!-- Start 'location.name' helper statement -->
					{{#if location.name}}
						<!-- Start 'location._id' helper statement -->
						{{#if location._id}}
							<a class="location_link" href="{{pathFor 'locationDetails' data=location}}">
								<span class="glyphicon glyphicon-home"></span>
								{{location.name}}
							</a>
						<!-- Invert 'location._id' helper statement -->
						{{else}}
							<span class="glyphicon glyphicon-home"></span>
							<span class="location_name">{{location.name}}</span>
						{{/if}}
						<!-- End 'location._id' helper statement -->
						<!-- Start 'room' helper statement -->
						{{#if room}}
							<span class="fa fa-map-signs"></span>
							<span class="location_room">{{this.room}}</span>
						{{/if}}
						<!-- End 'room' helper statement -->
					{{/if}}
					<!-- End 'location.name' helper statement -->
				</div>
				<div class="-eventTitle">
					{{plain this.title}}
				</div>
				<div class="-eventDescription">
					{{plain this.description}}
				</div>
			</div>
		</div>
	</a>
</template>

<template name="calendar_event_past">
	<a href="{{pathFor 'showEvent'}}">
	  	<div class="calendar_event_past no-padding col-xs-12 col-sm-4 col-md-3 col-lg-2" style='overflow: hidden'>
			<div class="course_event_date">
				<span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
				{{dateformat_withday start}}
			</div>
			<div class="course_event_time">
				<span class="glyphicon glyphicon-time" aria-hidden="true"></span>
				{{timeformat start}} - {{timeformat end}} &nbsp;&nbsp;&nbsp; {{this.location}}, {{this.room}}
			</div>
			<div class="course_event_title">
				<h4>{{this.title}}</h4>
			</div>
			<div class="course_event_desc ellipsis">
				<p>{{plain description}}</p>
			</div>
			<div class="grey_out"></div>
	  	</div>
	</a>
</template>

<template name="switchDate">
	<div class="switchDate">
		<div class="left">
			<button class="prevYear" aria-label="go back one year">
				<span class="fa fa-arrow-left"></span> {{mf "calendar.button.previousYear" "one year"}}
			</button>
			<button class="prevMonth" aria-label="go back one month">
				<span class="fa fa-arrow-left"></span> {{mf "calendar.button.previousMonth" "one month"}}
			</button>
			<button class="prevWeek" aria-label="go back one week">
				<span class="fa fa-arrow-left"></span> {{mf "calendar.button.previousweek" "one week"}}
			</button>
		</div>
		<div class="right">
			<button class="nextWeek" aria-label="go forward one week">
				{{mf "calendar.button.nextWeek" "one week"}} <span class="fa fa-arrow-right"></span>
			</button>
			<button class="nextMonth" aria-label="go forward one month">
				{{mf "calendar.button.nextMonth" "one month"}} <span class="fa fa-arrow-right"></span>
			</button>
			<button class="nextYear" aria-label="go forward one year">
				{{mf "calendar.button.nextYear" "one year"}} <span class="fa fa-arrow-right"></span>
			</button>
		</div>
		<div class="calendar_week">
		<div class="week">
				{{mf "calendar.weekNumber" "Week"}} {{weekNr date}}<br>
		</div>
		<div class="date">
			{{dateLong date}} - {{dateLong (endDateTo date)}}
		</div>


		</div>
	</div>
</template>
