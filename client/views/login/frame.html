<template name='loginFrame'>
	<div class="container-fluid">
		<div id="loginFrame">
			{{#if currentUser}}
			<div class="container-fluid">
				<div class="form-group">
					<h3>{{mf 'login.frame.welcome' 'Welcome {NAME}!' NAME=currentUser.username}}</h3>
				</div>
				<div class="form-group">
					<a class="btn btn-primary form-control" href="{{pathFor 'userprofile' _id=currentUser._id}}">
						<span class="glyphicon glyphicon-share-alt"></span>
						{{mf 'login.frame.profile' 'Visit my profile'}}
					</a>
				</div>
				<div class="form-group">
					<a class="btn btn-primary form-control" href="{{pathFor 'profile'}}">
						<span class="glyphicon glyphicon-cog"></span>
						{{mf 'login.frame.settings' 'Account settings'}}
					</a>
				</div>
				<div class="form-group">
					<button href="#" class="loginLogout btn btn-primary form-control">
						<span class="glyphicon glyphicon-log-out"></span>
						{{mf 'login.logout' 'Logout'}}
					</button>
				</div>
			</div>
			{{/if}}
			{{#if forgot}}
				{{> loginForgot}}
			{{/if}}
			{{#if login}}
				{{> loginLogin}}
			{{/if}}
		</div>
	</div>
</template>

<template name="loginLogin">
	<div class="container-fluid">
		<form>
				<div class="input-group">
					<span class="input-group-addon">
						<span class="glyphicon glyphicon-user"></span>
					</span>
					<input type="text" id="login-name" placeholder="{{mf 'frame.login.usernameOrEmail' 'Username or Email'}}">
				</div>
			<div id="username_warning_not_existing" style="display:none">
				{{mf 'login.username.usr_doesnt_exist' 'This user does not exist.'}}
			</div>
			<div id="username_warning" style="display:none">
				{{mf 'login.username.username_exists' 'This username already exists.'}}<br>
				{{mf 'login.username.choose_another' 'Please choose another one.'}}
			</div>

				<div class="input-group">
					<span class="input-group-addon">
						<span class="glyphicon glyphicon-lock"></span>
					</span>
					<input type="password" id="login-password" placeholder="{{mf 'frame.login.password' 'Password'}}">
				</div>
				<div id="password_warning_incorrect" style="display:none">
					{{mf 'login.password.password_incorrect' 'Incorrect password'}}
				</div>
				<div id="password_warning" style="display:none">
					{{mf 'login.password.no_password' 'Please enter a password to register.'}}
				</div>
				{{#if showForgot}}
					<button type="button" class="-forgot">
						<span class="fa fa-wrench"></span>
						{{mf 'forgot' "Oops I forgot my password"}}
					</button>
				{{/if}}

			{{#if showEmail}}
			<div id="show_email" class="form-group">
				<div class="input-group login_email">
					<span class="input-group-addon">
						<span class="glyphicon glyphicon-envelope"></span>
					</span>
					<input type="email" id="login-email" class="-loginEmail" placeholder="{{mf 'frame.login.email' 'E-Mail'}}">
				</div>
				<span class="registering_email_instructions">
					{{mf 'registering.email.instructions'
					"By entering an e-mail adress you allow us to send you a mail in case you forget your password."}}
				</span>
			</div>
			{{/if}}
			<div id="login_warning" style="display:none">
				{{mf 'login.login.warning' 'Please enter your username or email and password to login.'}}
			</div>

				<button type="submit" class='loginLogin btn btn-primary form-control {{#unless registering}}loginLoginLogin{{/unless}}'>
					<span class="glyphicon glyphicon-log-in"></span>&nbsp;
					{{#if registering}}
					{{mf 'login.login.back_to_login' 'Back to login'}}
					{{else}}
					{{mf 'login.login.submit' 'Login'}}
					{{/if}}
				</button>


				<button type="submit" class='loginRegister {{#if registering}}registering{{/if}}'>
					<span class="glyphicon glyphicon-plus"></span>&nbsp;
					{{mf 'login.register.submit' 'Create account'}}
				</button>

		{{#unless registering}}
			<div class="external_logins">
				<p>{{mf 'frame.login_external_services' 'Or login with:'}}</p>
				<button class="loginWithService" data-service='Google' title="Login with Google+">
					<span class="fa fa-google-plus-square"></span>
				</button>
				<button class="loginWithService" data-service='Facebook' title="Login with Facebook">
					<span class="fa fa-facebook-square"></span>
				</button>
				<button class="loginWithService" data-service='Github' title="Login with Github">
					<span class="fa fa-github-square"></span>
				</button>
			</div>
		{{/unless}}
		</form>
	</div>
</template>

<template name="loginForgot">
	<div class="container-fluid forgot_login">
		<h2>{{mf 'forgot.title' "Password reset"}}</h2>
		{{mf 'forgot.explanation'
		"We can send you a mail that allows you to reset your password. This is only possible if you've provided us with a mail address"}}
		<form>
			<div id="show_email" class="form-group">
				<div class="input-group">
					<span class="input-group-addon">
						<span class="glyphicon glyphicon-envelope"></span>
					</span>
					<input type="email" id="login-email" class="-loginEmail" placeholder="{{mf 'frame.login.email' 'E-Mail'}}">
				</div>
				{{#unless validEmail}}
					<span class="email_instructions">
						{{mf 'forgot.notValid' "Please enter the address you signed up with."}}
					</span>
				{{/unless}}
			</div>
			<div class="form-group">
				<button type="button" class="btn btn-primary -forgotSend form-control" {{disableForInvalidEmail}}>
					<span class="glyphicon glyphicon-envelope"></span>
					{{mf 'forgot.send' 'Reset my password'}}
				</button>
			</div>
			<div class="form-group">
				<button type="button" class="btn btn-secondary -forgotClose form-control">
					<span class="fa fa-close"></span>
					{{mf 'forgot.close' 'Never mind'}}
				</button>
			</div>
		</form>
	</div>
</template>
