<template name="region_sel_outer">
	{{#if Template.subscriptionsReady}}
		{{#if searchingRegions}}
			{{> region_sel}}
		{{else}}
			{{> regionsDisplay}}
		{{/if}}
	{{/if}}
</template>

<template name="region_sel">
	<a class="region_sel_link">
		<span class="fa fa-dot-circle-o"></span>&nbsp;
		<input class="-searchRegions"
					 value="{{#if region}}{{region.name}}{{else}}{{mf 'menue.All regions' 'All regions'}}{{/if}}"
					 type="text"
		/>
	</a>
	<span
		class="dropdown-toggle"
		data-toggle="dropdown"
		role="button"
		aria-expanded="false">
	</span>
	<span class="caret"></span>


	<ul class="dropdown-menu" role="menu">
		<li>
			<a class="regionselect -clickClose">
				<span class="regionName">{{mf 'menue.All regions' 'All regions'}}</span>
				<span class="eventsCount"
							title="{{mf 'regions.totalEventsCount.title' 'There {COUNT, plural, =0 {no upcoming events} one {is one upcoming event in all regions} other {are # upcoming events in all regions}}' COUNT=totalNumberOfEvents}}">
					{{totalNumberOfEvents}}
				</span>
				{{#if currentRegion}}
					<span class="glyphicon glyphicon-ok"></span>
				{{/if}}
			</a>
		</li>
		{{#each countries}}
			<li class="country">
				<span class="flag-icon flag-icon-{{lowCountry}}"></span>
				{{countryName}}
			</li>
			{{#each regions}}
				<li class="region">
					<a href="#" class="regionselect -clickClose">
						<span class="regionName">{{name}}</span>
						<span class="eventsCount"
									title="{{mf 'regions.eventCount.title' 'There {COUNT, plural, =0 {no upcoming events in} one {is one upcoming event in} other {are # upcoming events in}} {REGION}' COUNT=numberOfEvents REGION=this.name}}">
							{{numberOfEvents}}
						</span>
						{{#if currentRegion}}
							<span class="glyphicon glyphicon-ok"></span>
						{{/if}}
					</a>
				</li>
			{{/each}}
		{{/each}}
	</ul>
</template>

<template name="regionsDisplay">
	<a class="-regionsDisplay">
		<span class="fa fa-dot-circle-o"></span>&nbsp;
		{{#if region}}
			{{region.name}}
		{{else}}
			{{mf 'menue.All regions' 'All regions'}}
		{{/if}}
	</a>
</template>
